---
export interface Props {
  title: string;
  description?: string;
  image?: string;
  noIndex?: boolean;
}

const { 
  title, 
  description = "Velvet Quill - Where passion meets prose. A sophisticated literary collective for erotic and romance writers.",
  image = "/velvet-quill-og.jpg",
  noIndex = false 
} = Astro.props;

// const canonicalURL = new URL(Astro.url.pathname, Astro.site);
---

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  <!-- <link rel="canonical" href={canonicalURL} /> -->
  
  <!-- Primary Meta Tags -->
  <title>{title}</title>
  <meta name="title" content={title} />
  <meta name="description" content={description} />
  {noIndex && <meta name="robots" content="noindex, nofollow" />}
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website" />
  <meta property="og:url" content={Astro.url} />
  <meta property="og:title" content={title} />
  <meta property="og:description" content={description} />
  <meta property="og:image" content={new URL(image, Astro.url)} />
  
  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image" />
  <meta property="twitter:url" content={Astro.url} />
  <meta property="twitter:title" content={title} />
  <meta property="twitter:description" content={description} />
  <meta property="twitter:image" content={new URL(image, Astro.url)} />
  
  <!-- Theme Color -->
  <meta name="theme-color" content="#4A0E4E" />
  
  <!-- Preload Critical Resources -->
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;1,400;1,600&family=Inter:wght@300;400;500;600;700&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'" />
  
  <!-- Font Awesome Pro 7 - Add your Pro Kit URL here -->
    <script src="https://kit.fontawesome.com/950db21282.js" crossorigin="anonymous"></script>
    
  <!-- Styles -->
  <style is:global>
    @import '../styles/global.scss';
  </style>
</head>

<body>
  <!-- Skip to main content for accessibility -->
  <a href="#main-content" class="skip-link">
    Skip to main content
  </a>
  
  <!-- Background ambiance -->
  <div class="bg-ambiance">
    <div class="bg-gradient"></div>
    <div class="bg-texture"></div>
  </div>
  
  <!-- Main content -->
  <main id="main-content" class="main-content">
    <slot />
  </main>
  
  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="grid grid-2 gap-8">
        <div>
          <h3 class="footer-title">Velvet Quill</h3>
          <p class="footer-description">
            A sophisticated literary collective where passion meets prose. 
            Join writers who create stories that stir the soul and ignite the imagination.
          </p>
          <div class="footer-social">
            <a href="#" class="social-link">
              <span class="sr-only">Newsletter</span>
              <i class="fa-duotone fa-solid fa-envelope"></i>
            </a>
            <a href="#" class="social-link">
              <span class="sr-only">Twitter</span>
              <i class="fa-brands fa-x-twitter"></i>
            </a>
            <a href="#" class="social-link">
              <span class="sr-only">Instagram</span>
              <i class="fa-brands fa-instagram"></i>
            </a>
          </div>
        </div>
        
        <div>
          <h4 class="footer-section-title">Quick Links</h4>
          <nav class="footer-nav">
            <a href="#authors" class="footer-nav-link">Featured Authors</a>
            <span class="link-spacer"> •</span>
            <a href="#salons" class="footer-nav-link">Upcoming Salons</a>
            <span class="link-spacer"> •</span>
            <a href="#reading-room" class="footer-nav-link">Reading Room</a>
            <span class="link-spacer"> •</span>
            <a href="#join" class="footer-nav-link">Join the Collective</a>
          </nav>
        </div>
      </div>
      
      <div class="footer-bottom">
        <p>&copy; 2024 Velvet Quill Literary Collective. All rights reserved.</p>
        <p class="footer-tagline">Crafted with passion and precision for writers who dare to dream.</p>
      </div>
    </div>
  </footer>
  
  <!-- Scripts -->
  <script>
    // Smooth scrolling for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          target.scrollIntoView({
            behavior: 'smooth',
            block: 'start'
          });
        }
      });
    });
    
    // Add subtle parallax effect to background
    window.addEventListener('scroll', () => {
      const scrolled = window.pageYOffset;
      const rate = scrolled * -0.5;
      const backgrounds = document.querySelectorAll('.parallax-bg');
      backgrounds.forEach(bg => {
        bg.style.transform = `translateY(${rate}px)`;
      });
    });
    
    // Intersection Observer for scroll animations
    const observerOptions = {
      threshold: 0.1,
      rootMargin: '0px 0px -50px 0px'
    };
    
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('animate-fade-in-up');
        }
      });
    }, observerOptions);
    
    // Observe all sections for animations
    document.querySelectorAll('section').forEach(section => {
      observer.observe(section);
    });
  </script>
</body>
</html>

<style>
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }
  
  .focus\:not-sr-only:focus {
    position: static;
    width: auto;
    height: auto;
    padding: 0.5rem 1rem;
    margin: 0;
    overflow: visible;
    clip: auto;
    white-space: normal;
  }

  /* Background ambiance styles */
  .bg-ambiance {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    pointer-events: none;
    z-index: 0;
  }

  .bg-gradient {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, #4A0E4E 0%, #0A0A0A 50%, #4A0E4E 100%);
    opacity: 0.2;
  }

  .bg-texture {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-image: url('/paper-texture.png');
    opacity: 0.05;
  }

  /* Footer social icons */
  .footer-social {
    display: flex;
    gap: 1rem;
  }

  .social-link {
    color: #D4A5A5; /* blush-rose */
    transition: color 0.3s ease;
    font-size: 1.25rem;
  }

  .social-link:hover {
    color: #FFD700; /* gold-ink */
  }

  .link-spacer {
    color: #D4A5A5;
  }

  /* Skip link styles */
  .skip-link {
    position: absolute;
    top: -40px;
    left: 6px;
    background: #FFD700;
    color: #0A0A0A;
    padding: 8px 16px;
    border-radius: 6px;
    text-decoration: none;
    z-index: 100;
    transform: translateY(-100%);
    transition: transform 0.3s;
  }

  .skip-link:focus {
    position: absolute;
    top: 16px;
    left: 16px;
    transform: translateY(0%);
  }

  /* Main content */
  .main-content {
    position: relative;
    z-index: 1;
  }

  /* Footer styles */
  .footer {
    background: rgba(10, 10, 10, 0.95);
    border-top: 1px solid rgba(212, 165, 165, 0.2);
    padding: 3rem 0 2rem;
    margin-top: 4rem;
    position: relative;
    z-index: 1;
  }

  .footer-title {
    color: #FFD700;
    font-size: 1.5rem;
    font-weight: 600;
    margin-bottom: 1rem;
  }

  .footer-description {
    color: rgba(255, 248, 231, 0.7);
    font-size: 0.9rem;
    line-height: 1.6;
    margin-bottom: 1rem;
  }

  .footer-section-title {
    color: #D4A5A5;
    font-size: 1.1rem;
    font-weight: 500;
    margin-bottom: 1rem;
  }

  .footer-nav {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  .footer-nav-link {
    display: block;
    color: rgba(255, 248, 231, 0.8);
    font-size: 0.9rem;
    text-decoration: none;
    transition: color 0.3s ease;
  }

  .footer-nav-link:hover {
    color: #FFD700;
  }

  .footer-bottom {
    border-top: 1px solid rgba(212, 165, 165, 0.2);
    margin-top: 2rem;
    padding-top: 2rem;
    text-align: center;
    font-size: 0.9rem;
    opacity: 0.6;
  }

  .footer-tagline {
    margin-top: 0.5rem;
    color: rgba(255, 248, 231, 0.7);
  }
</style>